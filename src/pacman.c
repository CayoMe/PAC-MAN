#include "pacman_functions.h"
#include <stdlib.h>
#include <time.h>
#include <stdio.h>

char mapa[ROWS][COLS] = {
    {'#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#'},
    {'#','o','.','.','.','.','.','.','.','.','#','#','.','.','.','.','.','.','.','.','o','#'},
    {'#','.','#','#','.','#','#','#','#','.','#','#','.','#','#','#','#','.','#','#','.','#'},
    {'#','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#'},
    {'#','.','#','#','.','#','.','#','#','#','#','#','#','#','#','.','#','.','#','#','.','#'},
    {'#','.','.','.','.','#','.','.','.','.','#','#','.','.','.','.','#','.','.','.','.','#'},
    {'#','#','#','#','.','#','#','#','#',' ','#','#',' ','#','#','#','#','.','#','#','#','#'},
    {'#','#','#','#','.','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#','.','#','#','#','#'},
    {'#','#','#','#','.','#',' ','#','#','#','_','_','#','#','#',' ','#','.','#','#','#','#'},
    {'#','.','.','.','.',' ',' ','#',' ',' ',' ',' ',' ',' ','#',' ',' ','.','.','.','.','#'},
    {'#','#','#','#','.','#',' ','#','#','#','#','#','#','#','#',' ','#','.','#','#','#','#'},
    {'#','#','#','#','.','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#','.','#','#','#','#'},
    {'#','#','#','#','.','#',' ','#','#','#','#','#','#','#','#','.','#','.','#','#','#','#'},
    {'#','.','.','.','.','.','.','.','.','.','#','#','.','.','.','.',' ','.','.','.','.','#'},
    {'#','.','#','#','.','#','#','#','#','.','#','#','.','#','#','#','#','.','#','#','.','#'},
    {'#','o','.','#','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#','.','o','#'},
    {'#','#','.','#','.','#','.','#','#','#','#','#','#','#','#','.','#','.','#','.','#','#'},
    {'#','.','.','.','.','#','.','.','.','.','#','#','.','.','.','.','#','.','.','.','.','#'},
    {'#','.','#','#','#','#','#','#','#','.','#','#','.','#','#','#','#','#','#','#','.','#'},
    {'#','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#'},
    {'#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#'}
};
char fantasmapa[ROWS][COLS]; // Mapa dos fantasmas



char* main(void) {

    telaInicial();
    int p = 0;
    int *pontos = &p; // pontua√ß√£o 

    // Inicializando player e fantasmas
    gerarFantasmapa(mapa, fantasmapa);

    Player p1 = {9, 15, 'd'}; // Come√ßa olhando para baixo

    // Array dos fantasmas
    Fantasma fantasmas[4] = {
        {'F', 9, 9, 1, 0},  // Fantasma 1 (vermelho)
        {'P', 10, 9, 1, 0}, // Fantasma 2 (rosa)
        {'I', 11, 9, 1, 0},// Fantasma 3 (azul)
        {'O', 12, 9, 1, 0} // Fantasma 4 (laranja)
    };
    int num_fantasmas = 4;

    // Loop principal do jogo
    while (1)
    {
      moverJogador(&p1, ROWS, COLS, mapa, fantasmapa, pontos);

        // Loop para mover TODOS os fantasmas
        for (int i = 0; i < num_fantasmas; i++) {
            moverFantasma(&fantasmas[i], fantasmapa, p1);
        }

        // Renderiza tudo para criar o frame
        renderGrid(mapa, fantasmapa, p1, fantasmas, num_fantasmas, pontos);
    }

    return "ü•¥";
}
